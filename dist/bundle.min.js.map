{"version":3,"sources":["index.js"],"names":["findCurrent","currentClassName","document","concat","querySelector","updateCarret","carret","current","_current$offsetWidth","_current$offsetLeft","offsetLeft","style","width","offsetWidth","carretRailsClassName","menuLinkClassName","createElement","rails","links","addEventListener","e","target","link","stopPropagation","prototype","filter","call","parentNode","children","child","classList","remove","add","Array","siblings","forEach","asyncImages","i","images","length","window","img","onresize","data_src","getAttribute","Image","src","menuCarret"],"mappings":"AAAA,aAEA,IAAMA,YAAc,SAAAC,GAAdD,OAA8BE,SACnCA,cADmC,IAAAC,OAC1BC,KAEJC,aAAe,SAACC,EAAQC,GAA9B,GAAMF,GAAAA,EAAe,CAAA,IAAAG,EACGD,EAAnBD,YAAAA,OADgB,IAAAE,EACpB,EADoBA,EAAAC,EACGF,EAAAG,WAAAA,OADH,IAAAD,EACG,EADHA,EACGH,EAAAK,MAAAC,MAAA,GAAAT,OAAAU,EAAA,MAAAP,EACdO,MAAAA,KADc,GAAAV,OAAAO,EAAA,QAEtBJ,WAAaM,WACbN,IAJFL,EAAA,sBAQCM,EAAMO,YAAoBb,GAEpBA,EAAAA,SAAgBG,cAAhBH,IAAAA,OANL,uBAOKc,EAAAA,SAAiBC,cAAvB,OAEAV,EAAIC,aAAUP,QARb,gBAUDK,aAAcH,EAAQK,GACtBU,EAAMX,OAAMA,GAECA,SAAQC,iBAARD,IAAAA,OAPa,eAUpBY,QAAQhB,SAAAA,GAEdgB,EAAKC,iBAAS,YAAQ,SAAAC,GAAA,OAAAf,aAAAC,EAAAc,EAAAC,UACrBC,EAAAA,iBAAKH,WAAiB,WAAcZ,EAAIF,YAAYJ,GAAhBI,aAApCC,EAAAC,KAGCF,EAAAA,iBAAaC,QAAQC,SAAAA,GACrBa,EAHDG,kBAKKJ,MAAiBK,UAASC,OAAAC,KAAKJ,EAAAK,WAAAC,SAAA,SAAAC,GAAA,OAAAA,IAAAP,IACjCC,QAAAA,SAAAA,GAAF,OAAAD,EAAAQ,UAAAC,OAAA9B,KACAqB,EAAAQ,UAAcE,IAAGC,GAA2D1B,EAA5EP,YAAAC,GACAiC,aAASC,EAAQ5B,OAGjBA,OAAAA,SAAUP,WAAAA,OAAAA,aAAYC,EAAtBM,KAbF6B,YAAA,WAsBA,IAAI,IAAIC,EAAI,EAAGA,EAAInC,SAASoC,OAAOC,OAAQF,IAAK,CAJhDG,IAAMC,EAACC,SAAWJ,OAAAD,GAAAM,EAAMtC,EAAYuC,aAASrC,YASvCoC,KAJL,IAAAE,OAAY3C,IAAQyC,EAIpBF,EAAAK,IAAKH,KAMLF,SAAIK,iBAAJ,mBAAA,WACAC,aAbFX","file":"bundle.min.js","sourcesContent":["'use strict'\n\nconst findCurrent = currentClassName =>\n\tdocument.querySelector(`.${currentClassName}`)\n\nconst updateCarret = (carret, current) => {\n\tif (carret && current) {\n\t\tconst { offsetWidth = 0, offsetLeft = 0 } = current\n\t\tcarret.style.width = `${offsetWidth}px`\n\t\tcarret.style.left = `${offsetLeft}px`\n\t}\n}\nconst menuCarret = () => {\n\tconst carretRailsClassName = 'menu__carret-rails'\n\tconst carretClassName = 'menu__carret'\n\tconst currentClassName = 'menu__link--current'\n\tconst menuLinkClassName = 'menu__link'\n\n\tlet current = findCurrent(currentClassName)\n\n\tconst rails = document.querySelector(`.${carretRailsClassName}`)\n\tconst carret = document.createElement('div')\n\tcarret.setAttribute('class', carretClassName)\n\tupdateCarret(carret, current)\n\trails.append(carret)\n\n\tconst links = document.querySelectorAll(`.${menuLinkClassName}`)\n\n\tlinks.forEach(link => {\n\t\tlink.addEventListener('mouseover', e => updateCarret(carret, e.target))\n\t\tlink.addEventListener('mouseout', () => {\n\t\t\tcurrent = findCurrent(currentClassName)\n\t\t\tupdateCarret(carret, current)\n\t\t})\n\n\t\tlink.addEventListener('click', e => {\n\t\t\te.stopPropagation()\n\t\t\tconst siblings = Array.prototype.filter.call(link.parentNode.children, child => child !== link)\n\t\t\tsiblings.forEach(link => link.classList.remove(currentClassName))\n\t\t\tlink.classList.add(currentClassName)\n\n\t\t\tcurrent = findCurrent(currentClassName)\n\t\t\tupdateCarret(carret, current)\n\t\t})\n\t})\n\n\twindow.onresize = () => updateCarret(carret, current)\n}\n\nconst asyncImages = () => {\n\tfor(let i = 0; i < document.images.length; i++) {\n\t\tconst img = document.images[i]\n\t\tconst data_src = img.getAttribute('data-src')\n\n\t\t// Про­пус­тить изо­бра­же­ния без data-src\n\t\tif (!data_src) continue\n\n\t\t// Обес­пе­чить за­груз­ку смен­но­го изо­бра­же­ния в кэш\n\t\t(new Image()).src = data_src\n\n\t\t// Установить загруженное изображение вместо прелоадера\n\t\timg.src = data_src\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tmenuCarret()\n\tasyncImages()\n})\n"]}